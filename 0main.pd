#N canvas 208 22 456 428 12;
#X declare -path Fraise_abs;
#X obj 25 46 wifruit fruit1 192.168.11.2;
#X obj 28 387 fruit/send fruit1;
#X obj 24 5 declare -path Fraise_abs;
#X obj 31 269 hsl 170 20 0 44220 0 0 empty empty empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 207 294 12 0 0 0 - - - 0;
#X text 85 297 ramp destination;
#X text 88 346 HOMING;
#N canvas 580 73 1196 527 debug 1;
#X obj 6 8 cnv 20 150 250 empty empty STATS 20 12 0 12 #e0e0e0 #404040 0;
#X obj 163 8 cnv 20 750 250 empty empty SETTINGS 20 12 0 12 #e0e0e0 #404040 0;
#X obj 924 9 cnv 20 250 250 empty empty DEBUG\ (don't\ use...) 20 12 0 12 #e0e0e0 #404040 0;
#X obj 162 264 cnv 20 750 250 empty empty RETURN\ INFOS 20 12 0 12 #e0e0e0 #404040 0;
#X obj 973 137 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 977 194 hsl 170 20 0 29480 0 0 empty empty empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 1036 195 12 0 0 0 - - - 0;
#X text 1033 225 PID setPoint;
#X text 1026 162 enable motor control;
#X obj 15 42 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X text 63 108 get pwm;
#X text 62 164 get encoder;
#X text 62 195 get ramp pos;
#X obj 14 229 t a;
#X obj 929 233 t a;
#X obj 175 291 fruit/receive fruit1;
#X listbox 175 367 40 0 0 3 VERSION - VERSION 0;
#X obj 175 342 list;
#X obj 569 355 print from_fruit;
#X obj 230 342 tgl 20 0 empty empty empty 0 -10 0 12 #000000 #ff0400 #000000 0 1;
#X obj 285 342 tgl 20 0 empty empty empty 0 -10 0 12 #000000 #ff0400 #000000 0 1;
#X floatatom 508 438 8 0 0 3 PWM - PWM 0;
#X obj 508 355 route l;
#X floatatom 713 439 12 0 0 3 ramp_pos - ramp_pos 0;
#X obj 782 382 print log_fruit;
#X listbox 259 427 8 0 0 0 STATE - STATE 16;
#X obj 259 402 symbol;
#X obj 570 412 unpack f f;
#X floatatom 570 437 9 0 0 3 enc_count - current_position 0;
#X floatatom 639 437 9 0 0 3 enc_speed - - 0;
#X obj 292 91 hsl 170 20 -1 1 0 0 empty empty empty -2 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X obj 289 116 * 32767;
#X floatatom 358 115 5 0 0 0 - - - 0;
#X msg 289 67 0;
#X text 357 142 pwm[-32767-32767];
#X msg 347 63 -20000;
#X msg 403 58 20000;
#X msg 468 64 -5000;
#X obj 175 316 route V end_low end_high state present;
#X obj 385 399 sel 1;
#X msg 385 424 V;
#X obj 185 491 fruit/send fruit1, f 29;
#X text 522 234 kp ki kd (*1000);
#X floatatom 525 60 5 0 0 2 kp - - 0;
#X floatatom 576 60 5 0 0 2 ki - - 0;
#X floatatom 627 60 5 0 0 2 kd - - 0;
#X obj 576 84 t b f;
#X obj 627 83 t b f;
#X obj 525 138 unpack f f f, f 15;
#X obj 525 163 * 1000;
#X obj 576 163 * 1000;
#X obj 627 163 * 1000;
#X obj 525 188 pack f f f, f 15;
#X obj 525 113 pack 370 650 0.1;
#X floatatom 958 412 12 0 0 0 - - - 0;
#X msg 958 308 44 670;
#X obj 958 333 *;
#X floatatom 958 358 5 0 0 0 - - - 0;
#X obj 958 387 * 2;
#X text 955 271 encoder: 44 step/tr;
#X text 955 287 reduction: 670;
#X text 700 52 ramp_accel ramp_maxspeed;
#X obj 289 236 t a;
#X text 701 66 units: steps/sec² steps/sec;
#X obj 958 436 * 270;
#X obj 958 461 / 360;
#X floatatom 958 486 5 0 0 0 - - - 0;
#X text 62 136 get current;
#X obj 15 67 metro 100;
#X obj 508 380 route pwm m ramp current, f 37;
#X floatatom 808 469 12 0 0 3 current(mA) - - 0;
#X msg 32 107 1;
#X msg 31 135 2;
#X msg 31 163 3;
#X msg 28 193 4;
#X msg 289 143 100 i \$1;
#X msg 525 214 110 l \$1 \$2 \$3;
#X msg 703 89 120 l 1000 5400;
#X msg 702 117 120 l 100 5400;
#X msg 972 108 210 l 0;
#X text 1027 107 set encoder count;
#X msg 973 164 220 \$1;
#X msg 974 224 230 l \$1;
#X obj 167 52 tgl 20 0 empty empty unlock_settings 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 167 77 20 \$1;
#X text 287 33 Manual PWM;
#X text 522 28 PID;
#X text 705 27 RAMP;
#X text 412 414 get version, f 7;
#X obj 971 54 tgl 20 0 empty empty unlock_debug 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X msg 971 79 200 \$1;
#X text 1051 414 58960 steps/tour;
#X text 1000 483 44220 steps/270°;
#X obj 808 411 - 120;
#X obj 808 440 max 0;
#X text 187 52 (be cautious!);
#X obj 83 16 inlet;
#X text 986 377 additional belt reduction: 2, f 16;
#X connect 4 0 81 0;
#X connect 5 0 82 0;
#X connect 5 0 6 0;
#X connect 9 0 68 0;
#X connect 13 0 41 0;
#X connect 14 0 41 0;
#X connect 15 0 38 0;
#X connect 17 0 16 0;
#X connect 22 0 69 0;
#X connect 22 1 18 0;
#X connect 26 0 25 0;
#X connect 27 0 28 0;
#X connect 27 1 29 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 31 0 75 0;
#X connect 33 0 30 0;
#X connect 35 0 30 0;
#X connect 36 0 30 0;
#X connect 37 0 30 0;
#X connect 38 0 17 0;
#X connect 38 1 19 0;
#X connect 38 2 20 0;
#X connect 38 3 26 0;
#X connect 38 4 39 0;
#X connect 38 5 22 0;
#X connect 39 0 40 0;
#X connect 40 0 41 1;
#X connect 43 0 53 0;
#X connect 44 0 46 0;
#X connect 45 0 47 0;
#X connect 46 0 53 0;
#X connect 46 1 53 1;
#X connect 47 0 53 0;
#X connect 47 1 53 2;
#X connect 48 0 49 0;
#X connect 48 1 50 0;
#X connect 48 2 51 0;
#X connect 49 0 52 0;
#X connect 50 0 52 1;
#X connect 51 0 52 2;
#X connect 52 0 76 0;
#X connect 53 0 48 0;
#X connect 54 0 64 0;
#X connect 55 0 56 0;
#X connect 56 0 57 0;
#X connect 57 0 58 0;
#X connect 58 0 54 0;
#X connect 62 0 13 0;
#X connect 64 0 65 0;
#X connect 65 0 66 0;
#X connect 68 0 71 0;
#X connect 68 0 73 0;
#X connect 68 0 74 0;
#X connect 68 0 72 0;
#X connect 69 0 21 0;
#X connect 69 1 27 0;
#X connect 69 2 23 0;
#X connect 69 3 93 0;
#X connect 69 4 24 0;
#X connect 71 0 13 0;
#X connect 72 0 13 0;
#X connect 73 0 13 0;
#X connect 74 0 13 0;
#X connect 75 0 62 0;
#X connect 76 0 62 0;
#X connect 77 0 62 0;
#X connect 78 0 62 0;
#X connect 79 0 14 0;
#X connect 81 0 14 0;
#X connect 82 0 14 0;
#X connect 83 0 84 0;
#X connect 84 0 62 0;
#X connect 89 0 90 0;
#X connect 90 0 14 0;
#X connect 93 0 94 0;
#X connect 94 0 70 0;
#X connect 96 0 9 0;
#X restore 28 194 pd debug;
#X listbox 97 95 34 0 0 0 VERSION VERSION - 16;
#X listbox 97 122 8 0 0 0 STATE STATE - 16;
#X msg 55 344 10;
#X msg 28 295 11 l \$1;
#X obj 31 220 hsl 170 40 0 44220 0 0 --- --- empty -2 -10 0 12 #ffffff #ffffff #000000 0 1;
#X obj 31 220 hsl 170 20 0 44220 0 0 empty ramp_pos ramp_current_pos 5 10 0 12 #9f9f9f #000000 #ffffff 0 1;
#X obj 31 241 hsl 170 20 0 44220 0 0 empty current_position current_position 5 10 0 12 #9f9f9f #000000 #ffffff 0 1;
#X obj 28 170 tgl 20 0 empty empty empty 0 -10 0 12 #fcfcfc #000000 #000000 0 1;
#X floatatom 214 221 8 0 0 3 PWM PWM - 0;
#X text 209 268 44220 = 270°;
#X connect 3 0 11 0;
#X connect 3 0 4 0;
#X connect 10 0 1 0;
#X connect 11 0 1 0;
#X connect 15 0 7 0;
